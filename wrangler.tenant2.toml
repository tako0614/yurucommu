name = "yurucommu-2"
main = "src/backend/index.ts"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat", "global_fetch_strictly_public"]

[vars]
TAKOS_URL = "https://takos.jp"
APP_URL = "https://test.yurucommu.com"
AUTH_MODE = "password"

# Secrets (set via wrangler secret put):
# - TAKOS_CLIENT_ID
# - TAKOS_CLIENT_SECRET
# - AUTH_PASSWORD

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "yurucommu-db-2"
database_id = "1314c6a4-2bda-4ea1-8d90-0f09a3cdb4a5"
migrations_dir = "migrations"

# R2 Bucket
[[r2_buckets]]
binding = "MEDIA"
bucket_name = "yurucommu-media-2"

# Static assets
[assets]
directory = "./dist"
binding = "ASSETS"
run_worker_first = true

# Route - Using test subdomain
[[routes]]
pattern = "test.yurucommu.com/*"
zone_name = "yurucommu.com"
